
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Jeremy Sklarsky</title>
  <meta name="author" content="Jeremy Sklarsky">

  
  <meta name="description" content="I have always been fascinated by probability. Everything that is going to happen can be expressed in terms of probability. Of course, just because &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jeremysklarsky.github.io/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Jeremy Sklarsky" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Jeremy Sklarsky</a></h1>
  
    <h2>The World Wide Web is My Oyster.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="jeremysklarsky.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/25/so-youre-saying-theres-a-chance-dot-dot-dot/">So You&#8217;re Saying There&#8217;s a Chance&#8230;</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-25T12:37:22-05:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>12:37 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have always been fascinated by probability. Everything that is going to happen can be expressed in terms of probability. Of course, just because something <em>can</em> be expressed that way doesn&rsquo;t mean we always have the tools to accurately express it. But sometimes we <em>do</em> know, objetively, what the likelihood something is going to occur and we ignore it anyway. That&rsquo;s because humans are notoriously bad at understanding probabilities and effectively changing our behaviors based on those numbers. Very few people are afraid of driving, but many (including your faithful author) are terrified of flying even though for sometime the most dangerous part of a commercial flight is driving to the airport.</p>

<p>I think part of the reason for this is that for the most part, we&rsquo;ve been taught to approach probablistic problems with math. Why is this a problem? Because I suck at math. Also, we descended from apes. They don&rsquo;t typically consult actuarial tables when determining whether the sound in the bush is a predator.</p>

<h2>The Birthday Problem</h2>

<p>Here&rsquo;s a quick question: If you stick a random group of people in a room, what the odds that 2 of them have the same birthday? Or to be more specific, how many people do you need for there to be at least a 50% chance that two of them share a birthday. The first time I heard this I thought &ldquo;well you&rsquo;d probably need 182.5 people.&rdquo;</p>

<p>That&rsquo;s wrong. You only need 23 people for there to be a better than 50% chance that two of them share the same birthday. Do you know how to solve this with math?</p>

<p><img src="http://upload.wikimedia.org/math/9/c/7/9c7763ad00291fc5be64923ea6d831d3.png" alt="MATH" /></p>

<p>This is <s>garbage</s> pretty hard to understand.</p>

<p>Here&rsquo;s why I LOVE programming - especially object oriented programming. Ruby allows me to think about how I would approach solving the problem, not just algorithmically but in the literal sense - with words. How would we solve this problem? We&rsquo;d take a bunch of people, give them a random birthday, and then check to see if any of them share the same birthday. We&rsquo;d do this a lot - say, 50,000 times - and take the average. Programming lets us do this in a couple lines of code. Math does not. Make a new instance of the <code>Birthday</code> class and pass in how many people you want to test for and how many simulations you want to run.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Birthday</span>
</span><span class='line'>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:people</span><span class="p">,</span> <span class="ss">:matches</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">people</span><span class="p">,</span> <span class="n">simulations</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@people</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="n">to_i</span>
</span><span class='line'>    <span class="vi">@matches</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="vi">@simulations</span> <span class="o">=</span> <span class="n">simulations</span><span class="o">.</span><span class="n">to_i</span>
</span><span class='line'>    <span class="vi">@simulations</span><span class="o">.</span><span class="n">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">call</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">percents</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">call</span>
</span><span class='line'>    <span class="n">birthdates</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class='line'>    <span class="vi">@people</span><span class="o">.</span><span class="n">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
</span><span class='line'>      <span class="n">birthdates</span> <span class="o">&lt;&lt;</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">365</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">birthdates</span><span class="o">.</span><span class="n">size</span> <span class="o">!=</span> <span class="n">birthdates</span><span class="o">.</span><span class="n">uniq</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>      <span class="vi">@matches</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">percents</span>
</span><span class='line'>    <span class="n">percent</span> <span class="o">=</span> <span class="p">(</span><span class="vi">@matches</span> <span class="o">/</span> <span class="vi">@simulations</span><span class="o">.</span><span class="n">to_f</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">*</span><span class="mi">100</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;With </span><span class="si">#{</span><span class="vi">@people</span><span class="si">}</span><span class="s2"> people in a room, there is a </span><span class="si">#{</span><span class="n">percent</span><span class="si">}</span><span class="s2">% chance&quot;</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;that at least 2 people will share a birthday.&quot;</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="vi">@simulations</span><span class="si">}</span><span class="s2"> simulations were run.&quot;</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">five</span> <span class="o">=</span> <span class="no">Birthday</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
</span><span class='line'><span class="n">ten</span> <span class="o">=</span> <span class="no">Birthday</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
</span><span class='line'><span class="n">twenty</span> <span class="o">=</span> <span class="no">Birthday</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
</span><span class='line'><span class="n">twenty_three</span> <span class="o">=</span> <span class="no">Birthday</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
</span><span class='line'><span class="n">thirty</span> <span class="o">=</span> <span class="no">Birthday</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
</span><span class='line'><span class="n">forty</span> <span class="o">=</span> <span class="no">Birthday</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
</span><span class='line'><span class="n">fifty</span> <span class="o">=</span> <span class="no">Birthday</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
</span><span class='line'><span class="n">sixty</span> <span class="o">=</span> <span class="no">Birthday</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
</span><span class='line'><span class="n">seventy</span> <span class="o">=</span> <span class="no">Birthday</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here&rsquo;s what we get when we run our simulation 50,000 times (with the expected %&rsquo;s per wikipedia listed as reference:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">|</span> <span class="n">n</span>  <span class="o">|</span> <span class="sx">% expected </span><span class="o">|</span> <span class="sx">% actual </span><span class="o">|</span>
</span><span class='line'><span class="o">|----|------------|----------|</span>
</span><span class='line'><span class="o">|</span> <span class="mi">5</span>  <span class="o">|</span> <span class="mi">2</span><span class="o">.</span><span class="mi">7</span><span class="o">%</span>       <span class="o">|</span> <span class="mi">2</span><span class="o">.</span><span class="mi">62</span><span class="o">%</span>    <span class="o">|</span>
</span><span class='line'><span class="o">|</span> <span class="mi">10</span> <span class="o">|</span> <span class="mi">11</span><span class="o">.</span><span class="mi">7</span><span class="o">%</span>      <span class="o">|</span> <span class="mi">11</span><span class="o">.</span><span class="mi">8</span><span class="o">%</span>    <span class="o">|</span>
</span><span class='line'><span class="o">|</span> <span class="mi">20</span> <span class="o">|</span> <span class="mi">41</span><span class="o">.</span><span class="mi">1</span><span class="o">%</span>      <span class="o">|</span> <span class="mi">40</span><span class="o">.</span><span class="mi">9</span><span class="o">%</span>    <span class="o">|</span>
</span><span class='line'><span class="o">|</span> <span class="mi">23</span> <span class="o">|</span> <span class="mi">50</span><span class="o">.</span><span class="mi">7</span><span class="o">%</span>      <span class="o">|</span> <span class="mi">50</span><span class="o">.</span><span class="mi">9</span><span class="o">%</span>    <span class="o">|</span>
</span><span class='line'><span class="o">|</span> <span class="mi">30</span> <span class="o">|</span> <span class="mi">70</span><span class="o">.</span><span class="mi">6</span><span class="o">%</span>      <span class="o">|</span> <span class="mi">70</span><span class="o">.</span><span class="mi">7</span><span class="o">%</span>    <span class="o">|</span>
</span><span class='line'><span class="o">|</span> <span class="mi">40</span> <span class="o">|</span> <span class="mi">89</span><span class="o">.</span><span class="mi">1</span><span class="o">%</span>      <span class="o">|</span> <span class="mi">89</span><span class="o">.</span><span class="mi">1</span><span class="o">%</span>    <span class="o">|</span>
</span><span class='line'><span class="o">|</span> <span class="mi">50</span> <span class="o">|</span> <span class="mi">97</span><span class="o">%</span>        <span class="o">|</span> <span class="mi">97</span><span class="o">.</span><span class="mi">1</span><span class="o">%</span>    <span class="o">|</span>
</span><span class='line'><span class="o">|</span> <span class="mi">60</span> <span class="o">|</span> <span class="mi">99</span><span class="o">.</span><span class="mi">4</span><span class="o">%</span>      <span class="o">|</span> <span class="mi">99</span><span class="o">.</span><span class="mi">4</span><span class="o">%</span>    <span class="o">|</span>
</span><span class='line'><span class="o">|</span> <span class="mi">70</span> <span class="o">|</span> <span class="mi">99</span><span class="o">.</span><span class="mi">9</span><span class="o">%</span>      <span class="o">|</span> <span class="mi">99</span><span class="o">.</span><span class="mi">9</span><span class="o">%</span>    <span class="o">|</span>
</span></code></pre></td></tr></table></div></figure>


<p>Looks like we were pretty close. That was pretty fun! Let&rsquo;s do another one. This might cause some controversy.</p>

<h2>Let&rsquo;s Make a Deal</h2>

<p>Marilyn vos Savant, is aptly named as she&rsquo;s a genius with one of the highest recorded IQ&rsquo;s on record, if you care about that sort of thing. She even had a syndicated column in Parade magazine where people wrote in with brain teasers. Her most famous column was about the notorious &ldquo;Monty Hall Problem.&rdquo; She answered the question correctly, but not before being publicly lambasted by some of the country&rsquo;s &ldquo;leading&rdquo; math and statistics experts. To this day the problem causes a fight whenever it comes up.</p>

<p>Here&rsquo;s the scenario. You&rsquo;re on a game show and the host says &ldquo;There are 3 doors. Behind one of these doors is a car. Behind the other two are goats.&rdquo;</p>

<p>You pick Door #1. The host will then open one of the two remaining doors that contains a goat - let&rsquo;s say he opens Door #3. Then you are given the option to keep your original choice of Door #1 or switch to Door #2.</p>

<p>Here&rsquo;s the question: is it better to keep your original pick or switch to the other remaining door? Or does it not matter?</p>

<p>Of course, when I first heard this problem I thought &ldquo;Easy - it doesn&rsquo;t matter whether you switch or not. Its a 50/50 coin flip. Two doors, two choices. One is a goat, one is a car. The answer is it doesn&rsquo;t matter whether you switch.&rdquo;</p>

<p>It really hurt my brain to find out this was very wrong. It is always better to switch. Like 100% better. Twice as good. But I didn&rsquo;t feel too bad. <a href="http://en.wikipedia.org/wiki/Monty_Hall_problem#Vos_Savant_and_the_media_furor">Math professors were getting it wrong too.</a></p>

<p>Writing code to solve this problem not only gives you the answer, but helps you understand the problem the better.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">MontyHall</span>
</span><span class='line'>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:doors</span><span class="p">,</span> <span class="ss">:user_choice</span><span class="p">,</span> <span class="ss">:total_games</span><span class="p">,</span> <span class="ss">:staying_wins</span><span class="p">,</span> <span class="ss">:switching_wins</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">times</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@total_games</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="vi">@staying_wins</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="vi">@switching_wins</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="vi">@times</span> <span class="o">=</span> <span class="n">times</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">call</span>
</span><span class='line'>    <span class="vi">@times</span><span class="o">.</span><span class="n">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
</span><span class='line'>      <span class="vi">@doors</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;goat&quot;</span><span class="p">,</span> <span class="s2">&quot;goat&quot;</span><span class="p">,</span> <span class="s2">&quot;goat&quot;</span><span class="o">]</span>
</span><span class='line'>      <span class="n">hide_car</span>
</span><span class='line'>      <span class="n">get_user_choice</span>
</span><span class='line'>      <span class="vi">@total_games</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">staying_wins?</span>
</span><span class='line'>        <span class="vi">@staying_wins</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>      <span class="k">elsif</span> <span class="n">switching_wins?</span>
</span><span class='line'>        <span class="vi">@switching_wins</span> <span class="o">+=</span><span class="mi">1</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">hide_car</span>
</span><span class='line'>    <span class="n">doors</span><span class="o">[</span><span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">2</span><span class="p">)</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;car&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">get_user_choice</span>
</span><span class='line'>    <span class="vi">@user_choice</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">staying_wins?</span>
</span><span class='line'>    <span class="n">doors</span><span class="o">[</span><span class="n">user_choice</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;car&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">switching_wins?</span>
</span><span class='line'>    <span class="n">doors</span><span class="o">[</span><span class="n">user_choice</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;goat&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">percents</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;After </span><span class="si">#{</span><span class="vi">@total_games</span><span class="si">}</span><span class="s2"> games:&quot;</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Staying every time wins </span><span class="si">#{</span><span class="p">(</span><span class="vi">@staying_wins</span> <span class="o">/</span> <span class="vi">@total_games</span><span class="o">.</span><span class="n">to_f</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="mi">100</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Switching every time wins </span><span class="si">#{</span><span class="p">(</span><span class="vi">@switching_wins</span> <span class="o">/</span> <span class="vi">@total_games</span><span class="o">.</span><span class="n">to_f</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="mi">100</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This script puts &ldquo;car&rdquo; in a slot in an array, gives the user a random pick, and then tests whether keeping the user&rsquo;s pick or switching results in winning the car. In the end, of course we find that when you switch doors you will win the car 66.6% of the time and will win the car only 33.3% when you keep your original choice.</p>

<p>But the code skips a step - it skips the part where the host opens a door and then gives the contestant the choice. Why does it skip that part? BECAUSE IT IS IRRELEVANT TO THE OUTCOME.</p>

<p>The above code is an exercise in futility, as it simply an obfuscated way of testing how random your computer&rsquo;s random number generator is. But that&rsquo;s the point of Monty Hall. It tries to hide how simple the problem is. The question shouldn&rsquo;t be &ldquo;is it to your advantage to switch doors?&rdquo; That is just a fancier way of asking &ldquo;what are the odds that your original pick was correct?&rdquo; That is obvious and intuitive: 1 in 3. The fact that the host opens one of the doors DOES NOT CHANGE THIS. Your original pick is still only a 1 in 3 shot of being right. Ergo, the one remaining door will have the car 2/3 of the time.</p>

<p>This is why programming is fun. Without the benefit of math, we have to express these complex problems in abstract, metaphorical terms that are easier to understand regardless of your background in math.</p>

<p>Head over to the <a href="http://www.nytimes.com/2008/04/08/science/08monty.html?_r=0">NYTimes feature on the Monty Hall Problem</a> to play an interactive version of the game.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/15/bash-how-i-learned-to-stop-worrying-and-love-the-terminal/">Bash: How I Learned to Stop Worrying and Love the Terminal</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-15T07:34:58-05:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>7:34 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Background</h2>

<p>When you first had a computer, how did you use it? Some of that will depend on when you were born. My family first purchased a computer (custom built IBM Compatible Clone!) when I was 9, in 1992. It did not have Windows. It was DOS.</p>

<p><a href="http://en.wikipedia.org/wiki/DOS#Origins">DOS was Microsoft&rsquo;s version of UNIX.</a></p>

<p><img src="http://lh5.ggpht.com/_dNWdTN1SaKE/SpKeAYT9cyI/AAAAAAAAAN8/f-ev43N3Cjk/msdos71%5B6%5D.png?imgmax=800" alt="DOS" /></p>

<p>One time, I thought it would be funny to delete the contents of my computer&rsquo;s <a href="http://en.wikipedia.org/wiki/AUTOEXEC.BAT">autoexec.bat</a> file. This was basically a set of plain text instructions for what the computer should do when you turned it on. Turns out &ldquo;nothing&rdquo; is what happens when you delete those contents. Literally. We had to call a tech-savvy neighbor who brought a copy of his file to rewrite ours.</p>

<p>At 9 years old I was opening files, making new directories, and searching all from the DOS prompt. But then Windows happened, I got into Apple products, and was spoiled forever. Typing clunky commands seemed pretty archaic compared to pointing at what you want and getting it on demand, and less precise. I thought UNIX would be lost on me forever.</p>

<h2>Enter the Terminal</h2>

<p><img src="http://upload.wikimedia.org/wikipedia/commons/7/73/Grand_Central_Station_Main_Concourse_Jan_2006.jpg" alt="GCT" /><br>^<em>This is a terminal. People are so afraid of Terminal they call this thing Grand Central Station instead.</em></p>

<p>This, it turns out, was incorrect thinking. Windows and OSX are the bouncers of the computing world. They tell you what you can do and how to do it. Terminal, on the other hand is like the guy who works at the bar, lets you in when the place is closed and lets drink whatever you want.</p>

<p><img class="left" src="images/bouncer-black-text.png" title="This is your OS" ></p>

<p>The biggest benefit is speed.</p>

<p>Most people in Flatiron School know about tab completion at this point. Quite simply, while in a directory, start typing the name of a file or folder, hit tab, and Terminal will finish your command for you. From your home directory, &ldquo;$cd doc&rdquo; <em>hit tab</em> becomes &ldquo;$cd Documents&rdquo; pretty quickly. If you have multiple files that start with similar strings, there is a helper shortcut for you too. Option+ Tab will give you a list of folders and files in your directory starting with a string such that &ldquo;$cd d&rdquo; <em>option+tab</em> will yield <em>Desktop/   Documents/ Downloads/ Dropbox/   dev/</em> so you&rsquo;ll at least know what you&rsquo;re working with.</p>

<p>The real fun is the speed and convenience that comes from automation. With a few quick key commands, custom Bash scripts, and aliases. You can save yourself major time. Let&rsquo;s look at a few by opening up our bash profile.</p>

<h3>Building our own scripts</h3>

<ul>
<li>cd ~</li>
<li>&ldquo;What was the name of that file? <em>types ls</em>&rdquo;</li>
<li>&ldquo;Hmm, must be a hidden file&rdquo; <em>types ls -a</em></li>
<li>OK. <em>subl .bash_profile</em></li>
<li>&ldquo;Man that was annoying, and now I&rsquo;ve forgotten what directory I used to be in.&rdquo;</li>
</ul>


<p>We could simply type <em>subl ~/.bash_profile</em> but even that get tedious. So let&rsquo;s add this function to our profile. Now when we type &ldquo;subl-bash&rdquo; anywhere in Terminal. And guess what, tab completion works for functions too.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  <span class="k">function</span> subl-bash <span class="o">{</span>
</span><span class='line'>          subl ~/.bash_profile
</span><span class='line'>      <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>That was fun. Let&rsquo;s make another one. What&rsquo;s something you want to do almost every time you make a new directory? Generally its navigate into that directory.</p>

<ul>
<li>mkdir my-awesome-directory</li>
<li>cd my-awesome-directory</li>
</ul>


<p>I think we can cut that down to one line of code. Like ruby, Bash functions can take an argument (), and then we access them in our function with $. So &ldquo;mkcd <em>directory name</em> will now create a directory and navigate to it one shot.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  <span class="k">function</span> mkcd <span class="o">()</span> <span class="o">{</span>
</span><span class='line'>          mkdir <span class="nv">$1</span><span class="p">;</span> <span class="c">#makes the directory</span>
</span><span class='line'>          <span class="nb">cd</span> <span class="nv">$1</span><span class="p">;</span>    <span class="c">#navigates to the new directory</span>
</span><span class='line'>      <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>What&rsquo;s another thing we do as Flatiron students <em>literally</em> every day? We clone a git repository, try to remember the name of repo, and then navigate into that directoy. With this script, utilizing the bash command &lsquo;basename&rsquo; [<a href="http://unix.stackexchange.com/questions/44735/how-to-get-only-filename-using-sed">1</a>] you can clone and navigate with a single command. Use this script by simply typing &ldquo;gcl&rdquo; and pasting the address of the github page you want to clone.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#alias gcl=&quot;git clone&quot;  &lt;-- if you have a gcl alias already, make sure to comment it out.</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> gcl <span class="o">()</span> <span class="o">{</span>
</span><span class='line'>          git clone <span class="nv">$1</span><span class="p">;</span>
</span><span class='line'>          <span class="nb">cd</span> <span class="sb">`</span>basename <span class="nv">$1</span> .git<span class="sb">`</span><span class="p">;</span>   <span class="c">#in bash, everything between backticks </span>
</span><span class='line'>                                   <span class="c">#will be replaced with the output of the command. </span>
</span><span class='line'>                                   <span class="c">#basename chops off the path from the file name</span>
</span><span class='line'>                                   <span class="c"># .git removes the file extension </span>
</span><span class='line'>  <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This one&rsquo;s my favorite so far. First, install the <a href="https://github.com/prasmussen/chrome-cli">chrome-cli gem</a>. This gives you command line access to chrome.</p>

<p>Then, add this function to your .bash_profile. Enter &ldquo;labs&rdquo; into Terminal and in one shot we navigate to our labs directory, close whatever nonsense we have open in Chrome, and go to the Ironboard login page.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  <span class="k">function</span> labs <span class="o">{</span>
</span><span class='line'>          <span class="nb">cd</span> ~/dev/web-007/labs-ruby<span class="p">;</span> <span class="c">#this should be the path to wherever your labs folder is.</span>
</span><span class='line'>          chrome-cli close -w<span class="p">;</span> <span class="c">#closes whatever time-wasting tabs you have open</span>
</span><span class='line'>          chrome-cli open http://learn.flatironschool.com/users/auth/github<span class="p">;</span> <span class="c">#opens the ironboard homepage</span>
</span><span class='line'>          clear<span class="p">;</span> <span class="c">#clears the terminal window</span>
</span><span class='line'>  <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This next one navigates us to my blog&rsquo;s directory, opens the posts folder in sublime, opens chrome to my local preview, and generates a local preview of the blog. Your function might have to change a bit if you are using a different blogging platform. Good thing Octopress lets use the command line!</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  <span class="k">function</span> blog <span class="o">{</span>
</span><span class='line'>          <span class="nb">cd</span> ~/dev/blog/jeremysklarsky.github.io/<span class="p">;</span> <span class="c">#navigates to my blog&#39;s directory</span>
</span><span class='line'>          subl ~/dev/blog/jeremysklarsky.github.io/source/_posts<span class="p">;</span> <span class="c">#opens up the posts folder in Sublime</span>
</span><span class='line'>          chrome-cli open localhost:4000<span class="p">;</span> <span class="c">#Opens up live preview page in Chrome</span>
</span><span class='line'>          rake preview<span class="p">;</span> <span class="c">#generates live preview (give chrome a second for the preview page to refresh)</span>
</span><span class='line'>  <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And for good measure, let&rsquo;s add some custom aliases.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  <span class="nb">alias </span><span class="nv">web</span><span class="o">=</span><span class="s1">&#39;cd ~/dev/web-007&#39;</span>
</span><span class='line'>  <span class="nb">alias </span><span class="nv">dev</span><span class="o">=</span><span class="s1">&#39;cd ~/dev&#39;</span>
</span><span class='line'>  <span class="nb">alias </span>ruby-labs<span class="o">=</span><span class="s1">&#39;cd ~/dev/web-007/labs-ruby&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we have one word shortcuts to get our most commonly used directories. Think how much time we can save just over the course of the semester with a few of these shortcuts. The Terminal is our oyster.</p>

<p><img src="http://collegetimes.com/wp-content/uploads/2013/09/bruce-almighty.gif" alt="Bruce" /></p>

<p>References:<br>
1. <a href="http://unix.stackexchange.com/questions/44735/how-to-get-only-filename-using-sed">http://unix.stackexchange.com/questions/44735/how-to-get-only-filename-using-sed</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/14/yelp-i-need-some-data/">Yelp! I Need Some Data, Not Just Any Data&#8230;</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-14T12:31:14-05:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>12:31 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Authors note: This is my first ever post!</em></p>

<h2>Background</h2>

<p>My first two weeks at <a href="http://www.flatironschool.com">Flatiron School</a> have been an absolute whirlwind. I can feel us slowly approaching a time when we can <strong>actually</strong> deploy our skills and do something useful.</p>

<p>Diving into Ruby headfirst has been a joy, though it remained largely in the realm of theoretical and hypothetical. I&rsquo;m not one scoff at intellectual exercises for their own sake, but the painstaking task of iterating over made up hashes was starting to test my own powers of concentration and emotional constitution.</p>

<p>Among the more powerful lectures have involved data scraping and parsing demonstrations.</p>

<p>In a couple of quick clicks our lead <s>guru</s> instructor managed to pull all the prices of every apartment listed on craigslist and find the average. Looks like we haven&rsquo;t been iterating for nothing. BOOM!</p>

<p><img src="http://media.giphy.com/media/QMcamps7Gzj2g/giphy.gif" alt="Kramer Shocked" />
<br>^everyone in class.</p>

<h2>Writing a Yelp-er Method</h2>

<p>That looked like fun and I wanted a turn. For some years I&rsquo;ve been fairly obsessed with data collection and manipulation. But my participation in the sport was limited by both, obviously, my data collection and manipulation abilities. But no longer! In my first two weeks as a developer, I&rsquo;ve learned to adopt the idea that I am not limited by what my computer tells me what I&rsquo;m allowed to do. It is a tool to do my bidding!</p>

<p>For my test case, I thought scraping <a href="http://www.yelp.com">Yelp</a> would be a good place to start. After a few clicks, I realized the easiest way to access Yelp&rsquo;s API would not be parsing a long JSON string like we had in the Spotify lab. Luckily for you, dear readers, <a href="http://www.yelp.com/developers/documentation/v2/overview">Yelp&rsquo;s API documentation</a> lead us to a very helpful Ruby gem for parsing search results directly into a hash with tons of data pertaining to your search.</p>

<p>Let&rsquo;s get started:<br>
1. In terminal, run &lsquo;gem install yelp&rsquo;.<br>
2. &lsquo;require yelp&rsquo; in your ruby program, or include &lsquo;yelp&rsquo; in your gemfile.<br>
3. Make a million dollars.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;yelp&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">client</span> <span class="o">=</span> <span class="no">Yelp</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">({</span> <span class="ss">consumer_key</span><span class="p">:</span> <span class="no">YOUR_CONSUMER_KEY</span><span class="p">,</span>
</span><span class='line'>                            <span class="ss">consumer_secret</span><span class="p">:</span> <span class="no">YOUR_CONSUMER_SECRET</span><span class="p">,</span>
</span><span class='line'>                            <span class="ss">token</span><span class="p">:</span> <span class="no">YOUR_TOKEN</span><span class="p">,</span>
</span><span class='line'>                            <span class="ss">token_secret</span><span class="p">:</span> <span class="no">YOUR_TOKEN_SECRET</span>
</span><span class='line'>                          <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>When the interpreter runs this code, your client object has access to all of the methods defined in the gem. You interact with Yelp&rsquo;s data by using a the parameters laid out in their API within the gem&rsquo;s syntax. Yelp gives you plenty of helpful tags to customize your search. Check out the <a href="http://www.yelp.com/developers/documentation/v2/search_api">documentation</a> in the search API for some of them.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">italian_places</span> <span class="o">=</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="n">k</span><span class="o">[</span><span class="n">v</span><span class="o">]</span> <span class="o">=</span> <span class="p">{}}</span>
</span><span class='line'>
</span><span class='line'><span class="n">params</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">term</span><span class="p">:</span> <span class="s1">&#39;italian&#39;</span><span class="p">,</span>
</span><span class='line'>           <span class="ss">category_filter</span><span class="p">:</span> <span class="s1">&#39;restaurants&#39;</span>
</span><span class='line'>         <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">locale</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">cc</span><span class="p">:</span> <span class="s2">&quot;US&quot;</span><span class="p">,</span> <span class="ss">lang</span><span class="p">:</span> <span class="s1">&#39;en&#39;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;Park Slope&#39;</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">locale</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>For our test search, I focused on some pretty basic ones: search for Italian restaurants in the nearby neighborhood of Park Slope. The return of this search is an array like object called a Burst, which contains instances of Business objects.</p>

<p>Yelp then has a separate <a href="http://www.yelp.com/developers/documentation/v2/business">Business API</a> for accessing the info in the returned data structure. The gem lets us call them as methods on each individual business object returned in the Burst. Here are a few of the major ones.</p>

<!---Business API methods-->


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">## search</span>
</span><span class='line'><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;San Francisco&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">response</span><span class="o">.</span><span class="n">businesses</span>
</span><span class='line'><span class="c1"># [&lt;Business 1&gt;, &lt;Business 2&gt;, ...]</span>
</span><span class='line'>
</span><span class='line'><span class="n">response</span><span class="o">.</span><span class="n">businesses</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="n">name</span>
</span><span class='line'><span class="c1"># &quot;Kim Makoi, DC&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">response</span><span class="o">.</span><span class="n">businesses</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="n">rating</span>
</span><span class='line'><span class="c1"># 5.0</span>
</span><span class='line'>
</span><span class='line'><span class="c1">## business</span>
</span><span class='line'><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">business</span><span class="p">(</span><span class="s1">&#39;yelp-san-francisco&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">response</span><span class="o">.</span><span class="n">name</span>
</span><span class='line'><span class="c1"># Yelp</span>
</span><span class='line'>
</span><span class='line'><span class="n">response</span><span class="o">.</span><span class="n">categories</span>
</span><span class='line'><span class="c1"># [[&quot;Local Flavor&quot;, &quot;localflavor&quot;], [&quot;Mass Media&quot;, &quot;massmedia&quot;]]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now here is the fun part: parsing the data. We can then iterate through each object&rsquo;s keys and store the values in our own hash, which I&rsquo;ve created and called italian_places.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;Park Slope&#39;</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">locale</span><span class="p">)</span><span class="o">.</span><span class="n">businesses</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">place</span><span class="o">|</span>
</span><span class='line'>  <span class="n">italian_places</span><span class="o">[</span><span class="n">place</span><span class="o">.</span><span class="n">name</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="ss">:review_count</span> <span class="o">=&gt;</span> <span class="n">place</span><span class="o">.</span><span class="n">review_count</span><span class="p">,</span>
</span><span class='line'>    <span class="ss">:rating</span> <span class="o">=&gt;</span> <span class="n">place</span><span class="o">.</span><span class="n">rating</span><span class="p">,</span>
</span><span class='line'>    <span class="ss">:phone</span> <span class="o">=&gt;</span> <span class="n">place</span><span class="o">.</span><span class="n">phone</span><span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>For the moment, I can&rsquo;t seem to get more than ~17 results to show up. This may have something to do with my amateurish Yelp authorization key. In any event,
the results look something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">italian_places</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'> <span class="s2">&quot;Piccoli Trattoria&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="ss">:review_count</span><span class="o">=&gt;</span><span class="mi">213</span><span class="p">,</span> <span class="ss">:rating</span><span class="o">=&gt;</span><span class="mi">4</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="ss">:phone</span><span class="o">=&gt;</span><span class="s2">&quot;7187880066&quot;</span><span class="p">},</span>
</span><span class='line'> <span class="s2">&quot;Al Di La Trattoria&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="ss">:review_count</span><span class="o">=&gt;</span><span class="mi">516</span><span class="p">,</span> <span class="ss">:rating</span><span class="o">=&gt;</span><span class="mi">4</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="ss">:phone</span><span class="o">=&gt;</span><span class="s2">&quot;7186368888&quot;</span><span class="p">},</span>
</span><span class='line'> <span class="s2">&quot;Peppino&#39;s&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="ss">:review_count</span><span class="o">=&gt;</span><span class="mi">218</span><span class="p">,</span> <span class="ss">:rating</span><span class="o">=&gt;</span><span class="mi">4</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="ss">:phone</span><span class="o">=&gt;</span><span class="s2">&quot;7187687244&quot;</span><span class="p">},</span>
</span><span class='line'> <span class="s2">&quot;Mariella&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="ss">:review_count</span><span class="o">=&gt;</span><span class="mi">62</span><span class="p">,</span> <span class="ss">:rating</span><span class="o">=&gt;</span><span class="mi">4</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="ss">:phone</span><span class="o">=&gt;</span><span class="s2">&quot;7184992132&quot;</span><span class="p">},</span>
</span><span class='line'> <span class="s2">&quot;Scottadito Osteria Toscana&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="ss">:review_count</span><span class="o">=&gt;</span><span class="mi">484</span><span class="p">,</span> <span class="ss">:rating</span><span class="o">=&gt;</span><span class="mi">4</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="ss">:phone</span><span class="o">=&gt;</span><span class="s2">&quot;7186364800&quot;</span><span class="p">},</span>
</span><span class='line'> <span class="s2">&quot;Giovanni&#39;s Brooklyn Eats&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="ss">:review_count</span><span class="o">=&gt;</span><span class="mi">178</span><span class="p">,</span> <span class="ss">:rating</span><span class="o">=&gt;</span><span class="mi">4</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="ss">:phone</span><span class="o">=&gt;</span><span class="s2">&quot;7187888001&quot;</span><span class="p">},</span>
</span><span class='line'> <span class="s2">&quot;Scalino&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="ss">:review_count</span><span class="o">=&gt;</span><span class="mi">142</span><span class="p">,</span> <span class="ss">:rating</span><span class="o">=&gt;</span><span class="mi">4</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="ss">:phone</span><span class="o">=&gt;</span><span class="s2">&quot;7188405738&quot;</span><span class="p">}}</span>
</span></code></pre></td></tr></table></div></figure>


<p>From there we have a hash with which we can do anything we want. Sort by rating, sort by rating and most reviews, create adjusted ratings for restaurant categories based on the category average (i.e. grading the restaurant on a curve), whatever we want. The world (wide web) is our oyster!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/02/25/so-youre-saying-theres-a-chance-dot-dot-dot/">So You&#8217;re Saying There&#8217;s a Chance&#8230;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/15/bash-how-i-learned-to-stop-worrying-and-love-the-terminal/">Bash: How I Learned to Stop Worrying and Love the Terminal</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/14/yelp-i-need-some-data/">Yelp! I Need Some Data, Not Just Any Data&#8230;</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Jeremy Sklarsky -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
